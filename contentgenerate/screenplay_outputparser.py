

from langchain_community.llms.tongyi import Tongyi
from langchain.chains import LLMChain
from langchain.prompts import PromptTemplate


DASHSCOPE_API_KEY="sk-a48a1d84e015410292d07021f60b9acb"
import os
os.environ["DASHSCOPE_API_KEY"] = DASHSCOPE_API_KEY




template='''
        你是一个严苛的人，注重格式，我会给你一段文字，你需要按照输出参考将文字进行规整，请注意，输入里可能有多余的内容，你需要将他剔除掉以保证其完全符合输出参考，可能有不需要的标题段，
       你需要仅保留脚本部分。对话/旁白文本等部分不算做脚本部分，只有标注了脚本的标题段才算脚本，引号前的部分要严格按照我给你的格式
       你需要格式的文字如下
       {theme}
       你需要输出的格式参考以下：
        编号: 森咖啡-script1
        工程: 森咖啡
        标题: 快乐氛围
        配音: zh-CN-YunxiNeural
        字体: yishu.ttf
        字号: 80
        BGM : Diffrent.mp3
        脚本: 
        - 镜头: 猫
            内容: 森咖啡为您创造愉快的氛围就像与小猫玩耍一样快乐充满每一个角落
        - 镜头: 大厅
            内容: 在这个温馨的大厅中幸福的氛围伴随着香浓的咖啡让您的心情愉悦起来
        - 镜头: 卡座2
            内容: 舒适的卡座营造出宜人的快乐氛围让您与亲友共度美好的时光
        - 镜头: 卡座1
            内容: 在舒适的卡座中与亲友共享美味咖啡每一刻都充满了快乐和欢笑
        - 镜头: 门头
            内容: 当您需要一份快乐森咖啡的大门随时为您敞开让您进入快乐的世界
                
    '''


llm=Tongyi(model_name="qwen-plus",temperature=1)


prompt=PromptTemplate(
        template=template,
        input_variables=["theme"]#这个question就是用户输入的内容,这行代码不可缺少
)

chain = prompt|llm


def get_screenplay_out(theme):
    input={
        "theme":theme,
    }
    res=chain.invoke(input)#运行
    print(res)#打印结果
    return res



if __name__ == '__main__':
    theme='''
# 编号: 袜子-script1
## 工程: 袜子
## 标题: 智慧生活，从脚开始
## 配音: zh-CN-YunxiNeural
## 字体: yishu.ttf
## 字号: 80
## BGM : Technology.mp3

### 短视频剪辑表现方式分析

通过提供的语音内容，我们可以推断出这段短视频的剪辑风格偏向于现代、简洁且高效。语音传达了专业性和可靠性，语速适中，语调平稳但略带激励感，给人一种信任和安心的感觉。因此，视频可能会采用以下几种剪辑手法：
- **平滑过渡**：保持信息传递的连贯性。
- **特写镜头**：突出关键细节，如操作界面或产品特性。
- **图文结合**：用图表或文字强化重要信息点。
- **背景音乐轻快**：增强科技感和现代感。

### 创作视频脚本

#### 场景描述
1. **场景一：清晨起床**
   - **时间**：早晨7点
   - **地点**：卧室
   - **角色**：一位年轻的上班族（小李）
   - **行为**：小李穿上一双智能袜子，准备迎接新的一天。

2. **场景二：工作途中**
   - **时间**：上午9点
   - **地点**：地铁站/公交车上
   - **角色**：小李和其他乘客
   - **行为**：小李在拥挤的人群中行走自如，智能袜子提供舒适的支撑和保护。

3. **场景三：办公室内**
   - **时间**：下午2点
   - **地点**：办公室
   - **角色**：小李和他的同事
   - **行为**：小李展示袜子上的健康监测功能，如步数统计、压力分布等。

4. **场景四：健身房锻炼**
   - **时间**：晚上6点
   - **地点**：健身房
   - **角色**：小李和他的健身伙伴
   - **行为**：小李穿着智能袜子进行高强度训练，袜子帮助他更好地感知运动状态并调整姿势。

5. **场景五：回家休息**
   - **时间**：晚上10点
   - **地点**：客厅
   - **角色**：小李和他的家人
   - **行为**：小李与家人分享一天的经历，并展示了袜子如何帮助他度过了充实的一天。

#### 对话/旁白文本
- **旁白**：
  - “在这个快节奏的世界里，每一刻都值得被精心呵护。”
  - “小李选择了我们的智能袜子，让每一天从脚开始变得更加智慧。”
  - “无论是在通勤路上，还是忙碌的工作中，智能袜子始终陪伴着他，提供无微不至的关怀。”
  - “下班后，在健身房挥洒汗水时，智能袜子还能实时监测他的运动数据，确保每一次努力都不被辜负。”
  - “回到家中，小李与家人分享着这一天的美好瞬间，而这一切的背后，是智能袜子默默的支持。”

#### 视觉元素说明
- **镜头选择**：
  - **特写镜头**：聚焦于袜子的关键部位，如传感器、透气孔等，展现其高科技含量。
  - **全景镜头**：展示小李在不同场景中的活动，体现袜子的多功能性和适应性。
  - **动态效果**：利用动画展示袜子的功能特点，如健康数据同步到手机APP的过程。

- **视角变化**：
  - **第一人称视角**：跟随小李的脚步，感受袜子带来的舒适体验。
  - **第三人称视角**：观察小李与其他人的互动，强调袜子对日常生活的影响。

#### 音乐和音效建议
- **背景音乐**：选择一首轻快、富有科技感的曲子，营造积极向上的氛围。
- **关键音效**：
  - **点击声**：当小李查看手机APP上的健康数据时。
  - **脚步声**：在各个场景中，适当加入脚步声以增强真实感。
  - **呼吸声**：在健身房场景中，轻微的呼吸声可以增加紧张感和代入感。

### 整合与调整
将以上所有元素整合成一个连贯的故事线，确保逻辑流畅，视觉与听觉效果相得益彰。根据初步反馈对脚本进行必要的修订和完善。

### 审查与优化
完成初稿后，仔细检查脚本的内容完整性、逻辑连贯性和执行可行性，必要时进行优化以提高最终作品的质量。”

---     '''
    get_screenplay_out(theme)



