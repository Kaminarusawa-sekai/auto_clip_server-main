

from langchain_community.llms.tongyi import Tongyi
from langchain.chains import LLMChain
from langchain.prompts import PromptTemplate
import dashscope


DASHSCOPE_API_KEY="sk-a48a1d84e015410292d07021f60b9acb"
import os
os.environ["DASHSCOPE_API_KEY"] = DASHSCOPE_API_KEY

from contentgenerate import llm_base
# import llm_base


def get_screenplay_douyin(market_plan,hot_point,hot_start):
    template='''
        ###背景：
        我们有一个短视频大纲，其中包括了基础赛道、特殊身份和视觉记忆点。现在需要根据提供的热点词和开头语句，采用【金字塔关键词法】挖掘客户需求，并利用【情绪坐标轴】设计强烈的情感冲击，以生成一段能够在极短时间内吸引并触动目标客户的短视频脚本。

        ###目标：
         请根据提供的短视频大纲、热点词及开头语句，将结合大纲使用热点词，并根据大纲改写开头语句使其符合大纲主题，使用【金字塔关键词法】挖掘客户需求，并设计一个能在前两秒内抓住观众眼球、总时长不超过十几秒的短视频脚本。该视频应直接切入主题，高密度地传递信息，突出核心需求，忽略情节转折，直奔主题。

        ###风格：
        采用快节奏、高密度信息传递的创意策划风格，注重情感共鸣和即时吸引力，确保内容简洁有力且极具冲击力。

        ###语气：
        使用直接、强烈且积极的语气，旨在迅速引起观众注意并激发行动欲望。

        ###受众：
        这份脚本面向的是视频制作团队、创意策划人员及品牌经理，他们需要具体的创意指导来高效地生产高质量的短视频内容。

        ###注意
        请注意，热点词和热点语句未必和大纲有关系，没有关系你需要通过合理的方式进行结合

        ###输出：
        请以结构化的格式呈现结果，包括但不限于以下部分：

        需求挖掘（金字塔关键词法）
        视觉与听觉元素设计
        短视频脚本

        ###步骤：
        为了实现上述目标，请遵循以下步骤进行研究和撰写：

        ##需求挖掘（金字塔关键词法）
        塔尖：行业核心词 - 明确行业核心词（如“护肤”、“健身”等）。
        塔腰：场景细分词 - 识别特定场景下的细分需求（如“学生党护肤”、“上班族快速健身”）。
        塔基：长尾需求词 - 挖掘具体的需求（如“军训晒后修复急救方法”、“办公室久坐缓解疲劳操”）。
        ##视觉与听觉元素设计
        视觉记忆点 - 设计强烈的视觉元素，如鲜明的颜色对比、动态的文字或图形动画，确保在前两秒内抓住观众眼球。
        听觉记忆点 - 使用简短而有力的声音效果或音乐片段，在视频开始时立即吸引注意力。
        ##短视频脚本
        开头语句 - 使用强有力的开场白，直接切入主题，迅速传达核心信息。
        主体内容 - 紧凑地展示产品或服务的核心优势，结合视觉和听觉元素强化信息传递。
        结尾总结 - 在最后几秒钟内，强调产品的独特卖点，并鼓励观众采取行动（如点赞、分享、订阅）。
        
        ###示例：

        假设您的产品是一款针对年轻女性的智能美容仪，热点词包括“大S”。热点开头语为"太让人震撼了，IT又有新方向"。

        需求挖掘：
        塔尖：护肤
        塔腰：学生党护肤
        塔基：军训晒后修复急救方法
        视觉与听觉元素设计：
        开场：使用强烈的视觉对比（如从暗到亮），配合一声清脆的音效（如滴答声）。
        主体：动态展示皮肤从晒伤状态到恢复健康的转变过程，配以简洁有力的文字说明（如“晒后修复只需三步”）。
        结尾：快速切换至产品的特写镜头，加上一句激励性的旁白（如“让美丽触手可及！”）。
        
        短视频脚本：
        开头：“太让人震撼了，美容又有新方向（此句为热点语句改写而来），晒伤？看这里！”（伴随强烈的视觉转换和声音效果）
        主体：“三步高效修复，肌肤焕然一新。像大S一样（结合热点词）”（动态展示修复过程）
        结尾：“[产品名称]，你的专属美容专家！让美丽触手可及！”（快速切换至产品特写）
        优化后的短视频脚本示例：
        '''


    input=''''
        以下是你需要结合的
        ###短视频大纲：
        {market_plan}
        ### 热点词
        {hot_point}
        ### 你需要结合主题改写的热点开头语
        {hot_start}


    '''
    template=template.format()
    input=input.format(market_plan=market_plan,hot_point=hot_point,hot_start=hot_start)
    res=llm_base.get_Tongyi_response(template,input)
    return res



if __name__ == '__main__':
    
    hot_point="美白"
    hot_start="deepseek又放大招了"

    market_plan='''### 全渠道智能客服平台短视频内容策略大纲

#### 1. 基础赛道视频概念

**定义基础赛道：**
全渠道智能客服平台定位于提供高效、便捷且低成本的客户服务管理工具，特别适用于中小型企业和大型企业集团中的客服部门。其核心优势在于多渠道集成与智能分发、可视化报表工具和API接口对接。

**创意方向：**
- **用户案例展示：** 通过真实用户的成功故事，展示产品如何帮助企业提升客户服务效率，降低成本，并实现数字化转型。
- **功能演示：** 制作一系列简短的功能演示视频，重点介绍多渠道集成、智能分发、可视化报表等关键特性。
- **行业应用：** 针对不同行业（如电商、SaaS、零售等）制作定制化视频，展示平台在各行业的实际应用场景和效果。

**主题示例：**
1. **“从混乱到有序”——某电商公司如何通过智能客服平台优化客户体验**
2. **“数据驱动决策”——利用可视化报表工具提升客服绩效**
3. **“无缝集成的力量”——中小企业如何快速部署并与其他系统完美对接**

#### 2. 特殊身份视频概念

**识别目标客户的独特需求和偏好：**
根据客户画像分析，目标客户主要为中小企业的创始人、高层管理人员以及大型企业集团中的客服部门负责人。他们重视工作效率、成本控制、技术创新和数字化转型。

**强调特殊身份：**
- **智能服务专家：** 强调平台作为“智能服务专家”的角色，帮助企业在复杂多变的市场环境中保持竞争力。
- **数字化转型伙伴：** 定位为“数字化转型伙伴”，协助企业以较低成本实现高效客服管理，推动整体业务升级。

**故事情节或情景设定：**
1. **“忙碌CEO的一天”——一位创业公司CEO如何借助智能客服平台应对日常挑战**
   - 情景设定：CEO在办公室处理各种事务，突然接到紧急客户问题。通过使用智能客服平台，他迅速解决了问题，并实时监控客服团队的表现。
2. **“从传统到现代”——一家传统制造企业如何通过数字化转型提升服务质量**
   - 情景设定：一家传统制造企业的客服部门负责人，在引入智能客服平台后，实现了客服流程的自动化和智能化，显著提高了客户满意度。

#### 3. 视觉记忆点设计指南

**视觉元素设计建议：**
- **主色调：** 采用蓝色和绿色为主色调，传达专业、可靠和环保的品牌形象。
- **字体选择：** 使用简洁、现代的无衬线字体（如Roboto或Helvetica），确保文字清晰易读。
- **动画风格：** 结合流畅的动态图标和简洁的动画效果，突出科技感和智能化特点。
- **背景音乐：** 选择轻快、激励人心的背景音乐，营造积极向上的氛围。

**传达品牌价值观和情感诉求：**
- **信任与可靠性：** 通过稳定、专业的视觉呈现，传递品牌的可靠性和安全性。
- **创新与活力：** 利用现代感强的设计元素，展现品牌的创新精神和活力。

**一致应用指南：**
- **开篇与结尾：** 每个视频的开头和结尾都使用统一的品牌标识和口号，增强品牌认知度。
- **场景切换：** 在不同类型的视频中保持一致的转场效果和视觉风格，确保品牌形象连贯。
- **信息层次：** 合理安排信息层次，确保重要信息突出，次要信息辅助，使观众易于理解。

#### 整合与优化

**形成统一的品牌形象：**
将上述三个方面的内容整合成一个连贯的整体，确保每个短视频都能准确传达全渠道智能客服平台的核心价值和独特卖点。通过用户案例、功能演示和情感共鸣的故事设定，吸引并留住目标受众。同时，保持一致的视觉风格和品牌调性，强化品牌记忆点 。

**反馈与调整：**
根据初步反馈，不断优化视频内容结构和表现形式，确保最终作品既具有吸引力又易于实施。定期评估视频效果，及时调整策略，以适应市场变化和客户需求。
'''
    get_screenplay_douyin(market_plan,hot_point,hot_start)



